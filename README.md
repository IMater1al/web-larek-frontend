# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание базовых классов

### Класс EventEmitter

Класс предназначен для реализации "наблюдателя". Содержит в себе такие методы как:

- on - для подписки на событие
- off - для отписки от события
- emit - уведомления подписчиков о наступлении события

Дополнительные методы onAll offAll и trigger служат для подписки на все события, сброса событий и вызова события с заданными параметрами

### Класс Api

Класс предназначен для работы с внешним Api. Получает при создании экземпляра baseUrl - базовый url и options - необходимые заголовки запроса

Содержит в себе методы:

- handleResponse - для обработки ответа (либо ошибки при неудачном запросе)
- get - для выполнения get запроса, принимает в качестве аргумента только uri
- post - для выполнения post (по умолчанию) запроса, принимает в качестве аргумента uri - путь до требуемого ресурса, data - данные для отправки и method - метод запроса (может принимать значения POST PUT DELETE)

### Класс Card

Класс служит для создания готового компонента "карточка". Получает при создании экземпляра
данные, которые будут содержать:

- Название товара
- Url картинки товара
- Цену товара
- Категорию товара
- Описание товара

Содержит в себе методы:

- createCard - для генерации карточки
- setListeners - для установки слушателей

### Класс Basket

Класс служит для работы с корзиной. Принимает при создании экземпляр класса EventEmitter

Содержит методы:

- add - для добавления в корзину
- remove - для удаления из корзины
- changed - для уведомления подписчиков об изменении в корзине

### Класс BasketItem

Класс служит для создания разметки товара в корзине. Принимает при создании контейнер и экземпляр класса EventEmitter.

В классе устанавливаются слушатели на добавление и удаление, где генерируются соответствующие события в брокере

Содержит единственный метод render, который принимает данные товара и возвращает контейнер

### Класс ItemCatalog

Класс служит для хранения каталога товаров

Содержит методы:

- setItems - для установки каталога после получения с сервера
- getItems - для получения при рендере элементов корзины, принимает в качестве аргумента идентификатор карточки

### Класс Popup

Класс служит для отображения всплывающих окон при взаимодействии с страницей. Напрямую не создается, а служит для наследования

Содержит методы:

- open - для отображения окна
- close - для скрытия окна

### Класс CardPopup

Класс наследуется от класса Popup и служит для создания окна карточки. Принимает при создании экземпляра элемент Card и отображает всплывающее окно с возможностью добавить товар в корзину

Содержит методы:

- addToBasket - для добавления товара в корзину

### Класс PaymentPopup

Класс наследуется от класса Popup и служит для создания окна с выбором способа оплаты и адресом доставки

Содержит метод next, который откроет следующее окно и передаст в него данные с формы

Метод next вызывается при нажатии на кнопку "Далее"

### Класс UserInfoPopup

Класс наследуется от класса Popup и служит для создания окна для ввода email и номера телефона
Принимает данные с формы предыдущего окна и объединяет введенные данные для отправки

Содержит метод send для отправки данных формы на сервер и обработки ответа

### Класс BasketPopup

Класс наследуется от класса Popup и служит для создания окна корзины.
